define(["backbone","jquery","ace"],function(e,t,n){var r=require("ace/edit_session").EditSession;return e.Model.extend({urlRoot:"/api/document",idAttribute:"file_id",_cssMode:"ace/mode/less",_markdownMode:"ace/mode/markdown",editorSession:null,cssEditorSession:null,isStyling:!1,getEditorSession:function(){return this.isStyling=!1,this.editorSession!==null?(this.editorSession.setValue(this.get("body")),this.editorSession):(this.editorSession=new r(this.get("body")),this.editorSession.setMode(this._markdownMode),this.editorSession.on("change",t.proxy(this.bodyChange,this)),this.editorSession)},getCSSEditorSession:function(){this.isStyling=!0;if(this.cssEditorSession!==null)return this.cssEditorSession.setValue(this.get("style")),this.cssEditorSession;var e=this.get("style");return e||(e='// Write in LESS\n\n// Default style:\n@import "/stylesheets/default-remark.css";'),this.cssEditorSession=new r(e),this.cssEditorSession.setMode(this._cssMode),this.cssEditorSession.on("change",t.proxy(this.cssChange,this)),this.cssEditorSession},setSettings:function(e){this.editorSession&&this.editorSession.setUseWrapMode(e["wrap-lines"]),this.editorSession&&this.editorSession.setUseSoftTabs(e["use-soft-tab"]),this.editorSession&&this.editorSession.setTabSize(2),this.cssEditorSession&&this.cssEditorSession.setUseWrapMode(e["wrap-lines"]),this.cssEditorSession&&this.cssEditorSession.setUseSoftTabs(e["use-soft-tab"]),this.cssEditorSession&&this.cssEditorSession.setTabSize(2)},bodyChange:function(e,t){this.set("body",t.getValue())},cssChange:function(e,t){this.set("style",t.getValue())}})});