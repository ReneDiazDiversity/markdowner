define(["backbone","underscore","jquery","vent","js/models/user","bootstrap"],function(e,t,n,r,i){var s=["wrap-lines","full-line-selection","highlight-active-line","show-invisibles","show-indent-guides","show-gutter","show-print-margin","use-soft-tab","hightlight-selected-word"],o={"wrap-lines":!1,"full-line-selection":!0,"highlight-active-line":!0,"show-invisibles":!1,"show-indent-guides":!0,"show-gutter":!0,"show-print-margin":!0,"use-soft-tab":!0,"hightlight-selected-word":!0};return e.View.extend({el:"#editor-settings",initialize:function(){this.$el.modal({show:!1,keyboard:!0}),r.on("user:show",this.showModal,this),r.on("user:hide",this.hideModal,this),r.on("user:toggle",this.toggleModal,this),r.on("editor:documentLoaded",this.setSettings,this);var e=this.model.get("settings")||{};e.editor?r.trigger("editor:settings",e.editor):r.trigger("editor:settings",o),this.render()},events:{"click :checkbox":"settingsChanged"},showModal:function(e){e&&this.setModel(e),this.$el.modal("show")},hideModal:function(){this.$el.modal("hide")},toggleModal:function(e){this.$el.modal("toggle")},settingsChanged:function(e){var t=n(e.currentTarget),i=t.attr("class"),s=this.model.get("settings")||{};s.editor[i]=!s.editor[i],this.model.save({settings:s}),r.trigger("editor:settings",s.editor)},setSettings:function(){var e=this.model.get("settings")||{};e.editor||(e.editor=o),r.trigger("editor:settings",e.editor)},render:function(){var e=this.model.get("settings")||{},t;e.editor||(e.editor=o);for(var n=0,r=s.length;n<r;n++)t=s[n],e.editor[t]?this.$el.find("input."+t).prop("checked",!0):this.$el.find("input."+t).removeProp("checked")}})});