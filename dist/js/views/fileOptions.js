define(["backbone","underscore","jquery","vent","order!bootstrap/js/bootstrap-transition","order!bootstrap/js/bootstrap-modal","vent"],function(e,t,n,r){return e.View.extend({el:"#file-options",publicBase:"http://markdowner.herokuapp.com/document/",initialize:function(){this.$el.modal({show:!1,keyboard:!0}),r.on("fileOptions:show",this.showModal,this),r.on("fileOptions:hide",this.hideModal,this),r.on("fileOptions:toggle",this.toggleModal,this)},events:{"change .checkbox input":"makePublic",'focus input[type="text"]':"selectText"},setModel:function(e){this.model=e,this.render()},selectText:function(){var e=this;setTimeout(function(){e.$el.find('input[type="text"]').select()},300)},makePublic:function(){this.model.set("public",this.$el.find(".checkbox input").is(":checked")).save(),this.render()},showModal:function(e){e&&this.setModel(e),this.$el.modal("show")},hideModal:function(){this.$el.modal("hide")},toggleModal:function(e){this.setModel(e),this.$el.modal("toggle")},render:function(){var e=this.$el.find(".modal-body form"),t=e.find('input[type="checkbox"]'),n=e.find('input[type="text"]'),r=e.find("a.btn"),i=isPublic=this.model.get("public")||!1;return n.val(this.publicBase+this.model.get("_id")),isPublic?(t.attr("checked","checked"),n.addClass("readonly").removeAttr("disabled")):(t.removeAttr("checked"),n.removeClass("readonly").attr("disabled","disabled")),this}})});