define(["backbone","underscore","jquery","vent","order!bootstrap/js/bootstrap-transition","order!bootstrap/js/bootstrap-modal","vent"],function(e,t,n,r){return e.View.extend({el:"#file-options",publicBase:"http://markdowner.herokuapp.com/document/",initialize:function(){this.$el.modal({show:!1,keyboard:!0}),r.on("fileOptions:show",this.showModal,this),r.on("fileOptions:hide",this.hideModal,this),r.on("fileOptions:toggle",this.toggleModal,this)},events:{"change .public input":"makePublic","change .remark input":"makeRemark",'focus input[type="text"]':"selectText"},setModel:function(e){this.model=e,this.render()},selectText:function(){var e=this;setTimeout(function(){e.$el.find('input[type="text"]').select()},300)},makePublic:function(){this.model.set("public",this.$el.find(".public input").is(":checked")).save(),this.render()},makeRemark:function(){this.model.set("remark",this.$el.find(".remark input").is(":checked")).save(),this.render()},showModal:function(e){e&&this.setModel(e),this.$el.modal("show")},hideModal:function(){this.$el.modal("hide")},toggleModal:function(e){this.setModel(e),this.$el.modal("toggle")},render:function(){var e=this.$el.find(".modal-body form"),t=e.find('.public input[type="checkbox"]'),n=e.find('.remark input[type="checkbox"]'),r=e.find('input[type="text"]'),i=e.find("a.btn"),s=this.model.get("public")||!1,o=this.model.get("remark")||!1;return r.val(this.publicBase+this.model.get("_id")),s?(t.attr("checked","checked"),r.addClass("readonly").removeAttr("disabled")):(t.removeAttr("checked"),r.removeClass("readonly").attr("disabled","disabled")),o?n.attr("checked","checked"):n.removeAttr("checked"),this}})});