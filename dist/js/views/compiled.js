define(["backbone","underscore","jquery","vent","marked"],function(e,t,n,r,i){return e.View.extend({el:"#compiled",mdWrapper:'<div class="compiled github" />',rmWrapper:'<iframe class="remark-preview" />',initialize:function(){i.setOptions({gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,langPrefix:"language-"}),this.$el.find(".compiled").hide(),r.on("compiled:render",this.setOutput,this),r.on("compiled:remark",this.setRemark,this)},setOutput:function(e){this.$el.find(".weak-text").remove();var t=this.$el.find(".compiled");t.length||(t=n(this.mdWrapper).appendTo(this.$el),this.$el.find(".remark-preview").remove()),t.html(i(e)).show()},setRemark:function(e){this.$el.find(".weak-text").remove();var t=this.$el.find(".remark-preview");t.length?t.attr("src","/document/"+e.get("_id")):(t=n(this.rmWrapper).attr("src","/document/"+e.get("_id")).appendTo(this.$el),this.$el.find(".compiled").remove())}})});