define(["backbone","underscore","jquery","vent","text!templates/menu/themes.html","keymaster","js/libs/jquery.fullscreen"],function(e,t,n,r,i,s){var o={bright:{chrome:"Chrome",clouds:"Clouds",crimson_editor:"Crimson Editor",dawn:"Dawn",dreamweaver:"Dreamweaver",eclipse:"Eclipse",gitHub:"GitHub",solarized_light:"Solarized Light",textmate:"TextMate",tomorrow:"Tomorrow",xcode:"XCode"},dark:{ambiance:"Ambiance",chaos:"Chaos",clouds_midnight:"Clouds Midnight",cobalt:"Cobalt",idle_fingers:"idleFingers",kr_theme:"krTheme",merbivore:"Merbivore",merbivore_soft:"Merbivore Soft",mono_industrial:"Mono Industrial",monokai:"Monokai",pastel_on_dark:"Pastel on dark",solarized_dark:"Solarized Dark",twilight:"Twilight",tomorrow_night:"Tomorrow Night",tomorrow_night_blue:"Tomorrow Night Blue",tomorrow_night_bright:"Tomorrow Night Bright",tomorrow_night_eighties:"Tomorrow Night 80s",vibrant_ink:"Vibrant Ink"}};return e.View.extend({el:"#top-nav",initialize:function(){this.render(),this.bindKeyMaster(),r.on("editor:loadDocument",this.fileLoaded,this)},themeTemplate:t.template(i),events:{"click #newfile":"newfile","click #newfolder":"newfolder","click #compile-button":"compile","click #theme-button":"setThemeHeight","click #fullscreen-button":"toggleFullScreen","click #themelist a":"changeTheme","click #file-options-button":"fileOptions","click #savefile":"save","click #toggle-sidebar":"toggleSidebar","click #toggle-horizontal":"toggleHorizontal","click #toggle-style":"toggleStyling"},bindKeyMaster:function(){s("⌘+l, ctrl+l",n.proxy(this.newfile,this)),s("⇧+⌘+l, ⇧+ctrl+l",n.proxy(this.newfolder,this)),s("⌘+m, ctrl+m",n.proxy(this.compile,this)),s("⌘+s, ctrl+s",n.proxy(this.save,this)),s("⌘+k, ctrl+k",n.proxy(this.toggleSidebar,this))},fileLoaded:function(e){e.get("type")===2?this.$el.find("#toggle-style").show():this.$el.find("#toggle-style").hide()},toggleStyling:function(e){return e.preventDefault(),r.trigger("editor:editStyling"),!1},fileOptions:function(e){return e.preventDefault(),r.trigger("editor:currentEditorFileOptions"),!1},toggleSidebar:function(e){return e.preventDefault(),r.trigger("sidebar:toggle"),!1},toggleHorizontal:function(e){return e.preventDefault(),r.trigger("editor:toggleHorizontal"),!1},toggleFullScreen:function(e){return e.preventDefault(),n("html").toggleFullScreen(),!1},newfile:function(e){return e.preventDefault(),r.trigger("sidebar:newfile"),!1},save:function(e){return e.preventDefault(),r.trigger("editor:saveDocument"),!1},newfolder:function(e){return e.preventDefault(),r.trigger("sidebar:newfolder"),!1},setThemeHeight:function(e){var t=this.$el.find("#themelist");t.css({"max-height":n(document).outerHeight()/1.5})},changeTheme:function(e){return e.preventDefault(),r.trigger("editor:changeTheme",n(e.target).attr("data-theme")),!1},render:function(){var e=this.$el.find("#themelist");return e.empty(),e.append('<li class="nav-header">Bright</li>'),e.append(this.themeTemplate({themes:o.bright})),e.append('<li class="nav-header">Dark</li>'),e.append(this.themeTemplate({themes:o.dark})),this},compile:function(e){return r.trigger("editor:compile"),!1}})});