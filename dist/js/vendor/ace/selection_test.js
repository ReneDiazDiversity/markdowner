/* ***** BEGIN LICENSE BLOCK *****
 * Version: MPL 1.1/GPL 2.0/LGPL 2.1
 *
 * The contents of this file are subject to the Mozilla Public License Version
 * 1.1 (the "License"); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * The Original Code is Ajax.org Code Editor (ACE).
 *
 * The Initial Developer of the Original Code is
 * Ajax.org B.V.
 * Portions created by the Initial Developer are Copyright (C) 2010
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 *      Fabian Jakobs <fabian AT ajax DOT org>
 *
 * Alternatively, the contents of this file may be used under the terms of
 * either the GNU General Public License Version 2 or later (the "GPL"), or
 * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
 * in which case the provisions of the GPL or the LGPL are applicable instead
 * of those above. If you wish to allow use of your version of this file only
 * under the terms of either the GPL or the LGPL, and not to allow others to
 * use your version of this file under the terms of the MPL, indicate your
 * decision by deleting the provisions above and replace them with the notice
 * and other provisions required by the GPL or the LGPL. If you do not delete
 * the provisions above, a recipient may use your version of this file under
 * the terms of any one of the MPL, the GPL or the LGPL.
 *
 * ***** END LICENSE BLOCK ***** */

typeof process!="undefined"&&require("amd-loader"),define(["require","exports","module","./edit_session","./test/assertions"],function(e,t,n){var r=e("./edit_session").EditSession,i=e("./test/assertions");n.exports={createSession:function(e,t){var n=(new Array(t+1)).join("a"),i=(new Array(e)).join(n+"\n")+n;return new r(i)},"test: move cursor to end of file should place the cursor on last row and column":function(){var e=this.createSession(200,10),t=e.getSelection();t.moveCursorFileEnd(),i.position(t.getCursor(),199,10)},"test: moveCursor to start of file should place the cursor on the first row and column":function(){var e=this.createSession(200,10),t=e.getSelection();t.moveCursorFileStart(),i.position(t.getCursor(),0,0)},"test: move selection lead to end of file":function(){var e=this.createSession(200,10),t=e.getSelection();t.moveCursorTo(100,5),t.selectFileEnd();var n=t.getRange();i.position(n.start,100,5),i.position(n.end,199,10)},"test: move selection lead to start of file":function(){var e=this.createSession(200,10),t=e.getSelection();t.moveCursorTo(100,5),t.selectFileStart();var n=t.getRange();i.position(n.start,0,0),i.position(n.end,100,5)},"test: move cursor word right":function(){var e=new r(["ab"," Juhu Kinners (abc, 12)"," cde"].join("\n")),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorDown(),i.position(t.getCursor(),1,0),t.moveCursorWordRight(),i.position(t.getCursor(),1,5),t.moveCursorWordRight(),i.position(t.getCursor(),1,13),t.moveCursorWordRight(),i.position(t.getCursor(),1,18),t.moveCursorWordRight(),i.position(t.getCursor(),1,22),t.moveCursorWordRight(),i.position(t.getCursor(),2,4),t.moveCursorWordRight(),i.position(t.getCursor(),2,4)},"test: select word right if cursor in word":function(){var e=new r("Juhu Kinners"),t=e.getSelection();t.moveCursorTo(0,2),t.moveCursorWordRight(),i.position(t.getCursor(),0,4)},"test: moveCursor word left":function(){var e=new r(["ab"," Juhu Kinners (abc, 12)"," cde"].join("\n")),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorDown(),t.moveCursorLineEnd(),i.position(t.getCursor(),1,23),t.moveCursorWordLeft(),i.position(t.getCursor(),1,20),t.moveCursorWordLeft(),i.position(t.getCursor(),1,15),t.moveCursorWordLeft(),i.position(t.getCursor(),1,6),t.moveCursorWordLeft(),i.position(t.getCursor(),1,1),t.moveCursorWordLeft(),i.position(t.getCursor(),0,0),t.moveCursorWordLeft(),i.position(t.getCursor(),0,0)},"test: moveCursor word left with umlauts":function(){var e=new r(" Fuß Füße");e.$selectLongWords=!0;var t=e.getSelection();t.moveCursorTo(0,9),t.moveCursorWordLeft(),i.position(t.getCursor(),0,5),t.moveCursorWordLeft(),i.position(t.getCursor(),0,1)},"test: select word left if cursor in word":function(){var e=new r("Juhu Kinners"),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,8),t.moveCursorWordLeft(),i.position(t.getCursor(),0,5)},"test: select word right and select":function(){var e=new r("Juhu Kinners"),t=e.getSelection();t.moveCursorTo(0,0),t.selectWordRight();var n=t.getRange();i.position(n.start,0,0),i.position(n.end,0,4)},"test: select word left and select":function(){var e=new r("Juhu Kinners"),t=e.getSelection();t.moveCursorTo(0,3),t.selectWordLeft();var n=t.getRange();i.position(n.start,0,0),i.position(n.end,0,3)},"test: select word with cursor in word should select the word":function(){var e=new r("Juhu Kinners 123"),t=e.getSelection();t.moveCursorTo(0,8),t.selectWord();var n=t.getRange();i.position(n.start,0,5),i.position(n.end,0,12)},"test: select word with cursor in word including right whitespace should select the word":function(){var e=new r("Juhu Kinners      123"),t=e.getSelection();t.moveCursorTo(0,8),t.selectAWord();var n=t.getRange();i.position(n.start,0,5),i.position(n.end,0,18)},"test: select word with cursor betwen white space and word should select the word":function(){var e=new r("Juhu Kinners"),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,4),t.selectWord();var n=t.getRange();i.position(n.start,0,0),i.position(n.end,0,4),t.moveCursorTo(0,5),t.selectWord();var n=t.getRange();i.position(n.start,0,5),i.position(n.end,0,12)},"test: select word with cursor in white space should select white space":function(){var e=new r("Juhu  Kinners"),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,5),t.selectWord();var n=t.getRange();i.position(n.start,0,4),i.position(n.end,0,6)},"test: moving cursor should fire a 'changeCursor' event":function(){var e=new r("Juhu  Kinners"),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,5);var n=!1;t.addEventListener("changeCursor",function(){n=!0}),t.moveCursorTo(0,6),i.ok(n)},"test: calling setCursor with the same position should not fire an event":function(){var e=new r("Juhu  Kinners"),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,5);var n=!1;t.addEventListener("changeCursor",function(){n=!0}),t.moveCursorTo(0,5),i.notOk(n)},"test: moveWordright should move past || and [":function(){var e=new r("||foo["),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorWordRight(),i.position(t.getCursor(),0,5),t.moveCursorWordRight(),i.position(t.getCursor(),0,6)},"test: moveWordLeft should move past || and [":function(){var e=new r("||foo["),t=e.getSelection();e.$selectLongWords=!0,t.moveCursorTo(0,6),t.moveCursorWordLeft(),i.position(t.getCursor(),0,2),t.moveCursorWordLeft(),i.position(t.getCursor(),0,0)},"test: move cursor to line start should move cursor to end of the indentation first":function(){var e=new r("12\n    Juhu\n12"),t=e.getSelection();t.moveCursorTo(1,6),t.moveCursorLineStart(),i.position(t.getCursor(),1,4)},"test: move cursor to line start when the cursor is at the end of the indentation should move cursor to column 0":function(){var e=new r("12\n    Juhu\n12"),t=e.getSelection();t.moveCursorTo(1,4),t.moveCursorLineStart(),i.position(t.getCursor(),1,0)},"test: move cursor to line start when the cursor is at column 0 should move cursor to the end of the indentation":function(){var e=new r("12\n    Juhu\n12"),t=e.getSelection();t.moveCursorTo(1,0),t.moveCursorLineStart(),i.position(t.getCursor(),1,4)},"test: move cursor to line start when the cursor is before the initial indentation should move cursor to the end of the indentation":function(){var e=new r("12\n    Juhu\n12"),t=e.getSelection();t.moveCursorTo(1,2),t.moveCursorLineStart(),i.position(t.getCursor(),1,4)},"test go line up when in the middle of the first line should go to document start":function(){var e=new r("juhu kinners"),t=e.getSelection();t.moveCursorTo(0,4),t.moveCursorUp(),i.position(t.getCursor(),0,0)},"test: (wrap) go line up when in the middle of the first line should go to document start":function(){var e=new r("juhu kinners");e.setWrapLimitRange(5,5),e.adjustWrapLimit(80);var t=e.getSelection();t.moveCursorTo(0,4),t.moveCursorUp(),i.position(t.getCursor(),0,0)},"test go line down when in the middle of the last line should go to document end":function(){var e=new r("juhu kinners"),t=e.getSelection();t.moveCursorTo(0,4),t.moveCursorDown(),i.position(t.getCursor(),0,12)},"test (wrap) go line down when in the middle of the last line should go to document end":function(){var e=new r("juhu kinners");e.setWrapLimitRange(8,8),e.adjustWrapLimit(80);var t=e.getSelection();t.moveCursorTo(0,10),t.moveCursorDown(),i.position(t.getCursor(),0,12)},"test go line up twice and then once down when in the second should go back to the previous column":function(){var e=new r("juhu\nkinners"),t=e.getSelection();t.moveCursorTo(1,4),t.moveCursorUp(),t.moveCursorUp(),t.moveCursorDown(),i.position(t.getCursor(),1,4)},"test (keyboard navigation) when curLine is not EOL and targetLine is all whitespace new column should be current column":function(){var e=new r("function (a) {\n    \n}"),t=e.getSelection();t.moveCursorTo(2,0),t.moveCursorUp(),i.position(t.getCursor(),1,0)},"test (keyboard navigation) when curLine is EOL and targetLine is shorter dan current column, new column should be targetLine's EOL":function(){var e=new r("function (a) {\n    \n}"),t=e.getSelection();t.moveCursorTo(0,14),t.moveCursorDown(),i.position(t.getCursor(),1,4)}}}),typeof module!="undefined"&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();